!function(){var r=angular.module("add-script",["top-menu","http-post"]);r.controller("ScriptsAddCtrl",["$scope","$http","$location","$routeParams","setMyLoc","sendPost",function(r,t,a,i,o,e){function c(a){o.set("scripts","scripts"),t.get("/api/script/info/"+a+"?"+(new Date).getTime()).success(function(t){r.myScripts=[],""===t.error&&(s=t.data.data,s.params&&null!==s.params||(s.params=[]),s.env&&null!==s.env||(s.env=[]),s.times&&null!==s.times||(s.times=[]),r.myScript=s),r.errorMes=t.error,n()})}function n(){r.errorMes="",r.paramsToLine=r.myScript.params.join(" ")}r.scriptID=i.scriptID,this.topTab="",this.nextTab="",this.editScriptID="",r.addScriptCtrl=this,r.hasChange=!1,r.myScript={env:[],params:[],times:[]},r.paramsToLine="",r.env="",r.params="",r.times="",c(r.scriptID),r.saveScriptData=function(){if(console.log("$scope.hasChange: "+r.hasChange),console.log("$scope.myScript: "+r.myScript),r.hasChange){console.log("sendPost: "+e);for(var t in e)console.log("sendPost["+t+"]: "+e[t]);e.post("/api/script/save/"+r.scriptID,r.myScript).success(function(t,a,s,i){r.errorMes=t.error,console.log("status: "+a),console.log("headers: "+s),console.log("config: "+i),console.log("data: "+t),console.log("data.length: "+t.length);for(var o in t)console.log("data["+o+"]: "+t[o])}).error(function(r,t,a,s){console.log("error"),console.log("status: "+t),console.log("headers: "+a),console.log("config: "+s),console.log("data: "+r),console.log("data.length: "+r.length);for(var i in r)console.log("data["+i+"]: "+r[i])})}},r.deleteScriptListParam=function(t,a){if(angular.isArray(r.myScript[t])){var s=[];for(var i in r.myScript[t])r.myScript[t][i]!=a&&s.push(r.myScript[t][i]);r.myScript[t]=s,n(),r.hasChange=!0}},r.addScriptListParam=function(t){if(console.log("addScriptListParam. key = "+t),angular.isArray(r.myScript[t])){var a=r.times+"";"params"===t?a=r.params+"":"env"===t&&(a=r.env+""),""!==a&&(r.deleteScriptListParam(t,a),r.myScript[t].push(a),n(),r.hasChange=!0)}},r.downScriptListParam=function(t,a){if(angular.isArray(r.myScript[t]))for(var s=0;s<r.myScript[t].length-1;s++)if(r.myScript[t][s]==a){var i=r.myScript[t][s+1];r.myScript[t][s+1]=r.myScript[t][s],r.myScript[t][s]=i,n(),r.hasChange=!0;break}},r.upScriptListParam=function(t,a){if(angular.isArray(r.myScript[t])){for(var s in r.myScript[t])if(r.myScript[t][s]==a){i=s;break}for(var i=r.myScript[t].length-1;i>0;i--)if(r.myScript[t][i]==a){var o=r.myScript[t][i-1];r.myScript[t][i-1]=r.myScript[t][i],r.myScript[t][i]=o,n(),r.hasChange=!0;break}}}}])}();