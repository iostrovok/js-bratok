!function(){var e=angular.module("add-server",["top-menu"]);e.controller("ServersAddCtrl",["$scope","$http","$location","$routeParams","$modal","$log","setMyLoc","sendPost",function(e,s,t,r,o,i,n,c){function l(t){n.set("servers","servers"),s.get("/api/server/info/"+t+"?"+(new Date).getTime()).success(function(s){if(""===s.error){var t=s.data.data;t.scriptsSelected={};for(var r=0;r<t.scripts.length;r++)t.scriptsSelected[t.scripts[r]]=!0;e.myServer=t}e.errorMes=s.error})}function a(){console.log("1 openAddScriptDialog");var s=o.open({animation:e.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{scriptsList:function(){return console.log("2 openAddScriptDialog. resolve. $scope.scriptsList: "+e.scriptsList),e.scriptsList}}});console.log("2 openAddScriptDialog"),s.result.then(function(e){console.log("3 openAddScriptDialog"),i.info("0 Modal dismissed at: "+new Date)},function(){console.log("4 openAddScriptDialog"),i.info("1 Modal dismissed at: "+new Date)})}e.serverID=r.serverID,this.topTab="",this.nextTab="",e.myServer={id:"",ip:"",host:"",port:0,is_master:!1,scripts:[],scriptsSelected:{}},e.errorMes="",e.animationsEnabled=!0,e.scriptsList=[],e.selectedScrpt={},l(e.serverID),e.openAddScript=function(){n.set("servers","servers"),s.get("/api/script_list?"+(new Date).getTime()).success(function(s){if(console.log("1 openAddScript"),e.scriptsList=[],""===s.error){e.scriptsList=s.data.list;for(var t=0;t<e.scriptsList.length;t++){e.scriptsList[t].selected=!1;var r=e.scriptsList[t].id;e.myServer.scriptsSelected[r]&&(e.scriptsList[t].selected=!0)}a()}console.log("3 openAddScript"),e.errorMes=s.error})}}]),e.controller("ModalInstanceCtrl",function(e,s,t){console.log("=== 1 ModalInstanceCtrl: "+t),e.scriptsList=t,e.selectedScrpt={},e.ok=function(){console.log("=== 2 ModalInstanceCtrl"),s.close(e.selectedScrpt.id)},e.cancel=function(){console.log("=== 3 ModalInstanceCtrl"),s.dismiss("cancel")}})}();